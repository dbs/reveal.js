<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>We aim to misbehave: Evergreen as a Progressive Web App</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">
<style>
.reveal h1,
.reveal h2,
.reveal h3,
.reveal h4,
.reveal h5,
.reveal h6 {
    text-transform: none;
}
.reveal img.inline-logo {
    border: none;
    vertical-align: middle;
    margin-right: 0.5em;
}
.reveal img.inline-logo.small {
    max-height: 2em;
    max-width: 2em;
}
.reveal .hidden {
    display:none;
}
.reveal .show {
    display:pre;
}
.reveal blockquote {
    text-align: left;
    width: 80%;
}
.reveal blockquote cite {
    font-size: 60%;
    float: right;
}
.reveal .demolinks {
    font-size: 80%;
}
li[onclick] {
    list-style-type: '† ';
}
</style>
<script>
function revealCode(showId, el, hideId) {
    let matches = document.querySelectorAll('.reveal .show');
    if (document.getElementById(showId).className == 'show') {
        document.getElementById(showId).className = 'hidden';
    }
    else {
        for (let match of matches) {
            match.className = 'hidden';
        }
        document.getElementById(showId).className = 'show';
    }
    if (el !== undefined && hideId !== undefined) {
        el.setAttribute('onclick', 'revealCode("' + hideId + '", this, "' + showId + '")');
    }
    Reveal.sync();
}
</script>
		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
                <section>
                    <section>
                        <h1>We aim to misbehave</h1>
                        <h2>Evergreen: Progressive Web App</h2>
                        <p>Dan Scott, Laurentian University</p>
                        <p>2017 Evergreen International Conference</p>
                        <p>2017-04-07</p>
                    </section>
                    <section>
                        <h2>Everyone wants an app</h2>
                        <ul>
                            <li>Offline access! Part of my device!</li>
                            <li class="fragment">But apps take time to develop:
                                <ul>
                                    <li>iOS vs. Android <span style="font-size: 60%">vs. Android <span style="font-size: 60%">vs. Android</span></span></li>
                                </ul>
                            </li>
                            <li class="fragment"><a href="https://www.recode.net/2016/9/16/12933780/average-app-downloads-per-month-comscore">Half of US users download 0 apps per month</a>
                                <ul>
                                    <li>Finding the right app can be hard</li>
                                    <li>App install banners can be annoying</li>
                                </ul>
                            </li>
                            <li class="fragment"><a href="http://info.localytics.com/blog/24-of-users-abandon-an-app-after-one-use">24% of people abandon an app after one use</a> (<em>Localytics</em>, 2017-03-30)</a>
                        </ul>
                    </section>
                    <section>
                        <h3>Let's improve the web app we have</h3>
                        <blockquote>
                            Y'all got on this boat for different reasons, but y'all come to the same place.
                            So now I'm asking more of you than I have before. Maybe all. Sure as I know
                            anything, I know this - they will try again. Maybe on another world, maybe on
                            this very ground swept clean. A year from now, ten? They'll swing back to the
                            belief that they can make [native apps]… better. And I do not hold to that. So no
                            more runnin'. I aim to misbehave.
                                <cite><em>Serenity</em>, performance by Nathan Fillion, 2005-09-30.</cite>
                        </blockquote>
                    </section>
                </section>
				<section>
                    <section>
                        <h2>Progressive Web Apps are... what?</h2>
                    </section>
                    <section>
                        <h3>From graceful degradation to progressive enhancement</h3>
                        <aside class="notes">
                            Where graceful degradation was a web design
                            philosophy arguing that web sites should still be
                            functional in the absence of JavaScript or advanced
                            HTML, the progressive enhancement philosophy takes
                            JavaScript as a baseline and argues that you should
                            enable your site to take advantage of functionality
                            offered by different web browsers, particularly those
                            on a standards track.
                        </aside>
                    </section>
                    <section>
                        <h3>Progressive Web Apps (PWAs)</h3>
                        <ul>
                            <li><a href="https://developers.google.com/web/progressive-web-apps/checklist">Baseline</a> - make web apps more like native apps:
                                <ul>
                                    <li><em>Responsive</em>: UI adapts to different devices</li>
                                    <li><em>Fast</em> to load and render</li>
                                    <li><em>Secure</em>: encrypted by HTTPS</li>
                                    <li><em>Reliable</em> under any network condition</li>
                                    <li><em>Installable</em> to your device home screen</li>
                                </ul>
                            </li>
                        </ul>
                        <aside class="notes">
                            All of these are worthwhile goals. Let's see what
                            happens when we try to adapt the Evergreen
                            catalogue to meet them.
                        </aside>
                    </section>
                    <section data-background="images/lighthouse.png">
                        <div style="background:rgba(0,0,0,0.9);">
                            <h3>Auditing PWA progress</h3>
                            <ul>
                                <li><a href="https://developers.google.com/web/tools/lighthouse/">Lighthouse</a> audits web apps for quality</li>
                                <li>Focused on PWA baseline criteria</li>
                                <li>Offers advice for <em>exemplary PWAs</em> as well</li>
                                <li>Chrome extension &amp; command line tool</li>
                            </ul>
                        </div>
                        <aside class="notes">
                            We would really benefit from an objective tool to
                            tell us how we're doing. Lighthouse is one such 
                            solution.
                        </aside>
                    </section>
                    <section data-background="images/lighthouse.png">
                        <div style="background:rgba(0,0,0,0.9);">
                            <h3>Baseline: 37/100</h3>
                            <ul>
                                <li>Fresh Evergreen 2.12 install, without HTTPS</li>
                                <li>Praised for:
                                    <ul>
                                        <li>Page load performance is fast</li>
                                        <li>Site is progressively enhanced</li>
                                        <li>Design is mobile-friendly</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </section>
                    <section data-background="images/lighthouse.png">
                        <div style="background:rgba(0,0,0,0.9);">
                            <h3>Baseline: 37/100</h3>
                            <ul>
                                <li>Fresh Evergreen 2.12 install, with HTTPS</li>
                                <li>Punished for:
                                    <ul>
                                        <li>Network connection is secure</li>
                                        <li>User can be prompted to Add to Homescreen</li>
                                        <li>Installed web app will launch with custom splash screen</li>
                                        <li>Address bar matches brand colors</li>
                                        <li>App can load on offline/flaky connections</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </section>
                    <section>
                        <h2>Let's encrypt that connection</h2>
                        <ul>
                            <li onclick="revealCode('tls-certbot')">Use <code>certbot</code> to get a free TLS certificate from <a href="https://letsencrypt.org">LetsEncrypt</a></li>
                            <li onclick="revealCode('tls-config')">Point the Apache config at the certificates</li>
                            <li onclick="revealCode('tls-everything')">Enable TLS for all connections</li>
                        </ul>
                        <pre id="tls-certbot" class="hidden"><code>certbot certonly --webroot -w /openils/var/web/ \
        -d shiny.example.org</code></pre>
                        <pre id="tls-config" class="hidden"><code>vim /etc/apache2/sites-enabled/eg.conf

SSLCertificateFile /etc/letsencrypt/live/shiny.example.org/fullchain.pem
SSLCertificateKeyFile /etc/letsencrypt/live/shiny.example.org/privkey.pem</code></pre>
                        <pre id="tls-everything" class="hidden"><code>vim /etc/apache2/eg_vhost.conf

# Uncomment the following to force SSL for everything.
# Note that this defeats caching and you will suffer
# a performance hit.
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [NE,R,L]</code></pre>
                    </section>
                    <section data-background="images/lighthouse.png">
                        <div style="background:rgba(0,0,0,0.9);">
                            <h3>Baseline with HTTPS: 50/100</h3>
                            <blockquote class="fragment">
                                'Yes. Yes, this is a fertile land, and we will
                                thrive. We will rule over all this land, and we
                                will call it... "This Land."'
                                <cite>"Serenity." <em>Firefly</em>, performance by Alan Tudyk, season 1, episode 1, 2002-09-20. <em>Netflix</em>, https://www.netflix.com/watch/70133870?trackId=200257859.</cite>
                            </blockquote>
                        </div>
                    </section>
                </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
